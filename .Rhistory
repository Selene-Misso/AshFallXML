library(XML)
xml <- xmlToList("./aso.xml")
library(ggmap)
str(xml$Body$VolcanoInfo)
str(xml$Body$AshInfos)
str(xml$Body$AshInfos$AshInfo[1])
str(xml$Body$AshInfos$AshInfo[2])
str(xml$Body$AshInfos$AshInfo)
str(xml$Body$AshInfos)
str(xml$Body$AshInfos$AshInfo[1])
xml$Body$AshInfos$AshInfo[1]
xml$Body$AshInfos[1]$AshInfo
xml$Body$AshInfos[1]$AshInfo$Item$Kind$Property$Polygon$text
xml$Body$AshInfos[1]$AshInfo$Item[2]$Kind$Property$Polygon$text
xml$Body$AshInfos[1]$AshInfo$Item
xml$Body$AshInfos[1]$AshInfo$Item[1]
xml$Body$AshInfos[1]$AshInfo$Item[2]
xml$Body$AshInfos[1]$AshInfo$Item[3]
xml$Body$AshInfos[1]$AshInfo$Item
xml$Body$AshInfos[1]$AshInfo$Item[1]$Kind[1]
xml$Body$AshInfos[1]$AshInfo$Item[1]$Kind[1]$Name
xml$Body$AshInfos[1]$AshInfo$Item[1]$Kind[1]$Name
str(xml$Body$AshInfos[1]$AshInfo$Item[1]$Kind)
str(xml$Body$AshInfos[1]$AshInfo$Item[1]$Kind$Property[1])
str(xml$Body$AshInfos[1]$AshInfo$Item[1]$Kind$Property[1]$Polygon$text)
xml$Body$AshInfos[1]$AshInfo$Item[1]$Kind$Property[1]$Polygon$text
xml$Body$AshInfos[1]$AshInfo$Item[1]$Kind$Property[2]$Polygon$text
polygonStr <- xml$Body$AshInfos[1]$AshInfo$Item[1]$Kind$Property[2]$Polygon$text
strsplit(polygonStr, "/")
str(polygonStr)
unlist(strsplit(polygonStr, "/"))
positions <- unlist(strsplit(polygonStr, "/"))
polygonStr <- xml$Body$AshInfos[1]$AshInfo$Item[1]$Kind$Property[2]$Polygon$text
### 座標に分割
polygonStr <- unlist(strsplit(polygonStr, "/"))
rm(positions)
polygonStr
lats <- substring(polygonStr, 1,8)
lats <- as.numeric(substring(polygonStr, 1,8))
lats
lats <- as.numeric(substring(polygonStr, 1,8))
lats
lons <- as.numeric(substring(polygonStr, 9,17))
lons
ashPolygon <- data.frame(lat=lats, lon=lons)
View(ashPolygon)
ashPolygon[1]
ashPolygon[1,]
map <- get_map(ashPolygon[1,])
?get_map
ashPolygon[1,]
as.matrix(ashPolygon[1,])
str(as.matrix(ashPolygon[1,]))
c(1,1)
str(c(1,1))
mode(c(1,1))
str(as.matrix(ashPolygon[1,]))
ashPolygon[1,]
as.numeric(ashPolygon[1,])
map <- get_map(as.numeric(ashPolygon[1,]))
ashPolygon <- data.frame(lon=lons, lat=lats)
map <- get_map(as.numeric(ashPolygon[1,]))
rm(polygonStr,lats,lons)
ggmap(map)
map <- get_map(as.numeric(ashPolygon[1,]), language = "ja")
ggmap(map)
map <- get_map(as.numeric(ashPolygon[1,]), language = "ja", maptype = "roadmap")
ggmap(map)
map <- get_map(as.numeric(ashPolygon[1,]), language = "ja", maptype = "roadmap")
ggmap(map) +
geom_polygon(data = ashPolygon)
ggmap(map) +
geom_point(data = ashPolygon)
polygonStr <- xml$Body$AshInfos[1]$AshInfo$Item[1]$Kind$Property[1]$Polygon$text
lats <- as.numeric(substring(polygonStr, 1,8))
lons <- as.numeric(substring(polygonStr, 9,17))
ashPolygon <- data.frame(lon=lons, lat=lats)
rm(polygonStr,lats,lons)
ggmap(map) +
geom_point(data = ashPolygon)
xml$Body$AshInfos[1]$AshInfo$Item[1]$Kind$Property[2]$Polygon$text
polygonStr <- xml$Body$AshInfos[1]$AshInfo$Item[1]$Kind$Property[3]$Polygon$text
xml$Body$AshInfos[1]$AshInfo$Item[1]$Kind$Property[3]$Polygon$text
xml$Body$AshInfos[1]$AshInfo$Item["Kind"]
xml$Body$AshInfos[1]$AshInfo$Item["Kind"=="降灰"]
xml$Body$AshInfos[1]$AshInfo$Item["Kind"]
xml$Body$AshInfos[1]$AshInfo$Item["Kind"]$Kind
xml$Body$AshInfos[1]$AshInfo$Item["Kind"]$Kind$Property
xml$Body$AshInfos[1]$AshInfo$Item$Kind$Property
xml$Body$AshInfos[1]$AshInfo$Item$Kind$Property$Polygon$text
polygonStr <- xml$Body$AshInfos[1]$AshInfo$Item$Kind$Property$Polygon$text
### 文字列を分割
polygonStr <- unlist(strsplit(polygonStr, "/"))
### 文字列を座標に変換
lats <- as.numeric(substring(polygonStr, 1,8))
lons <- as.numeric(substring(polygonStr, 9,17))
ashPolygon <- data.frame(lon=lons, lat=lats)
rm(polygonStr,lats,lons)
ggmap(map) +
geom_point(data = ashPolygon)
ggmap(map) +
geom_polygon(data = ashPolygon)
ggmap(map) +
geom_polygon(data = ashPolygon, colour="gray20")
ggmap(map) +
geom_polygon(data = ashPolygon, colour="gray30")
ggmap(map) +
geom_polygon(data = ashPolygon, colour="gray30", alpha=0.8)
ggmap(map) +
geom_polygon(data = ashPolygon, colour="gray30", alpha=0.6)
